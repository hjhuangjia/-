<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<meta http-equiv="Content-Language" content="zh-cn">
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>多元数组元素变量</title>
</head>

<body>
<p><b>功能说明: 多元数组 or 元素变量</b></p>

<br /><br />

;-----------------------------------------【赋值元素变量】<br />
;-----------------------------------------给元素变量赋值（非子元素），值两边必须加 []，不然报错。<br />
MOV L$测试 [11,22,33,44,55,66,77,aa]<br />
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;<br />
;输出结果：[11,22,33,44,55,66,77,aa]<br />
;-----------------------------------------【取各字元素（大于等于0从第一个往后取；小于0从最后一个往前取】<br />
sendmsg 7 输出结果：&lt;$str(L$测试[0])&gt;,&lt;$str(L$测试[1])&gt;,&lt;$str(L$测试[2])&gt;,,,,,&lt;$str(L$测试[-2])&gt;,&lt;$str(L$测试[-1])&gt;,<br />
;输出结果：11,22,33,,,,,77,aa,<br /><br />

;-----------------------------------------【修改子元素】<br />
MOV L$测试[0] 00<br />
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;<br />
;输出结果：[00,22,33,44,55,66,77,aa]<br /><br />

;-----------------------------------------【增加子元素】<br />
INC L$测试 bb<br />
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;<br />
;输出结果：[00,22,33,44,55,66,77,aa,bb]<br /><br />

;-----------------------------------------【删除子元素】<br />
Dec L$测试 22<br />
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;<br />
;输出结果：[00,33,44,55,66,77,aa,bb]<br /><br />

;-----------------------------------------【修改子元素】<br />
Mov L$测试2 [aa,bb,cc]<br />
Mov L$测试[0] &lt;$str(L$测试2)&gt;<br />
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;<br />
;输出结果：[aa,bb,cc],33,44,55,66,77,aa,bb]<br /><br />

;-----------------------------------------【获取子元素的位置】<br />
GetListVarIndex L$测试 aa N1<br />
sendmsg 7 [L$测试]中"aa"位于第&lt;$STR(N1)&gt;个子元素<br /><br />

;-----------------------------------------【获取子元素数量】<br />
GetListVarCount L$测试 N1<br />
sendmsg 7 [L$测试]中有&lt;$STR(N1)&gt;个子元素<br /><br />


;-----------------------------------------【检查子元素是否存在】<br />
#if<br />
CheckVarInList L$测试 bb<br />
#act<br />
sendmsg 7 [L$测试]中存在"bb"<br />
#elseact<br />
sendmsg 7 [L$测试]中不存在"bb"<br /><br /><br /><br /><br />




;-----------------------------------------【元素支持变量下标（示例）】<br />
Mov N1 1<br />
MOV L$测试[&lt;$Str(N1)&gt;] 23<br />
sendmsg 7 输出结果：&lt;$str(L$测试[&lt;$Str(N1)&gt;])>
<br /><br />
<br />
<br />
<br />
<br />


;示例2<br />

[@main]<br />
&lt;1.赋值/@mov测试&gt;  &lt;2.inc测试/@inc测试&gt;   &lt;3.dec测试/@dec测试&gt;\<br /><br /><br /><br />


[@mov测试]<br />
#act<br />
MOV L$测试 [1,2,3,4,5,a]<br />
sendmsg 7 首次赋值(L$测试)的值为：&lt;$STR(L$测试)&gt;<br />
sendmsg 6 ----------------------------------<br /><br />

MOV L$测试[0] b<br />
sendmsg 7 修改后(L$测试)的值为：&lt;$STR(L$测试)&gt;<br />
sendmsg 7 当前(L$测试[0])的值为：&lt;$STR(L$测试[0])&gt;<br />
sendmsg 6 ----------------------------------<br /><br />

MOV N$id 0<br />
MOV L$测试[&lt;$STR(N$ID)&gt;] c<br />
sendmsg 7 当前(L$测试[&lt;$STR(N$ID)&gt;])的值为：&lt;$STR(L$测试[&lt;$STR(N$ID)&gt;])&gt;<br />
sendmsg 6 ----------------------------------<br /><br /><br /><br />


[@inc测试]<br />
#act<br />
inc L$测试 尾部增加元素<br />
inc L$测试[0] 第1个元素增加内容<br /><br />

MOV N$id 1<br />
INC L$测试[&lt;$str(N$id)&gt;] 第2个元素增加内容<br />

sendmsg 7 当前(L$测试)的完整内容：&lt;$STR(L$测试)&gt;<br />
sendmsg 7 当前(L$测试[0])的内容：&lt;$STR(L$测试[0])&gt;<br />
sendmsg 7 当前(L$测试[&lt;$STR(N$id)&gt;])的内容：&lt;$STR(L$测试[&lt;$STR(N$id)&gt;])&gt;<br />
sendmsg 6 ----------------------------------<br /><br />



[@dec测试]<br />
#act<br />
dec L$测试 尾部增加元素<br />
dec L$测试[0] 第1个元素增加内容<br />
sendmsg 7 当前(L$测试)的完整内容：&lt;$STR(L$测试)&gt;<br />
sendmsg 7 当前(L$测试[0])的内容：&lt;$STR(L$测试[0])&gt;<br />
sendmsg 6 ----------------------------------<br /><br /><br /><br /><br />


注意：指定参数必须是变量名的暂不支持变量嵌套<br />

mov N$当前行数 5<br />
MOV L$变&lt;$str(N$当前行数)&gt;量 [赋值内容,赋值内容2]<br /><br /><br />



;以下方法暂不支持,必要时再更新<br />
;MOV N$id 1<br />
;dec L$测试[&lt;$str(N$id)&gt;] 第2个元素增加内容<br />
;sendmsg 7 当前(L$测试[&lt;$STR(N$id)&gt;])的内容：&lt;$STR(L$测试[&lt;$STR(N$id)&gt;])&gt;<br /><br /><br />


[@清空]<br />
#act<br />
MOV L$测试 [11,22,33,44,55,66,77,aa]<br />
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;<br />
Mov L$测试 []<br />
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;<br /><br />

OR<br /><br />
MOV L$测试 [1,2,3]    ;----赋值123<br />
MOV L$测试    ;------清空<br />
sendmsg 6 &lt;$str(L$测试)&gt;   ;----结果毛都没有  变量都不显示 什么都没<br />
<br />
<br /><br /><br /><br /><br /><br />

<b>注意：</b><br />
[@main]<br />
#if<br />
#act<br />
MOV L$测试 [1,2,3]<br />
goto @内容(&lt;$Str(L$测试变量)&gt;)<br />
[@内容]<br />
#if<br />
#act<br />
SENDMSG 6 &lt;$scriptparam1&gt;---显示为[1,2,3]<br />
<br /><br /><br />
;-----------------------------------------------------------------相关操作命令--------------------------------<br />

;======================================================<br />

检所有子元素均是数字：<br />

CheckListAllDigit 元素变量<br /><br />

#IF<br />
#ACT<br />
MOV L$测试 [11,22,33,44,55,ff] <br /><br />

#IF<br />
CheckListAllDigit L$测试<br />
#ACT<br />
sendmsg 6 &lt;$STR(L$测试)&gt;中的各子元素全是数字<br />
#ELSEACT<br />
sendmsg 6 &lt;$STR(L$测试)&gt;中有子元素不是数字<br /><br />

;======================================================<br />

获取元素中的最大数字值：<br />
GetListMaxVar 元素变量名  保存变量<br /><br />

获取元素中的最小数字值：<br />
GetListMinVar 元素变量名  保存变量<br /><br />

#IF<br />
#ACT<br />
MOV L$测试 [11,22,33,44,55,66,77,88]<br />

#IF<br />
CheckListAllDigit L$测试<br />
#ACT<br />
GetListMaxVar L$测试 S100<br />
GetListMinVar L$测试 S101<br />
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;中的最大值为&lt;$str(S100)&gt;，最小值为&lt;$str(S101)&gt;<br />
#ELSEACT<br />
sendmsg 7 &lt;$str(L$测试)&gt;内有非法数值，取值失败<br />

;输出结果：[11,22,33,44,55,66,77,88]中的最大值为88，最小值为11 <br />

****************** 以上2个命令必须要求元素中的所有子元素必须是数字，否则得到的结果是error<br /><br />

;======================================================<br />

元素翻转（反序）：<br />
ReverseList 元素变量名  保存元素变量<br />

#IF<br />
#ACT<br />
MOV L$测试 [11,22,33,44,55,66,77,aa] <br />
ReverseList L$测试 L$测试<br />
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;<br />
;输出结果：[aa,77,66,55,44,33,22,11] <br /><br />

;======================================================<br />

元素排序：<br />

SortList 待排序元素变量  保存结果元素变量  排序方式(空或0:升序-从低到高；1:降序-从高到低)   排序依据(0或空:根据数值排序；1:根据文本排序)<br />

***** 当排序依据为数值时，元素中的所有子元素必须全是数字，否则会得到[error]<br /><br />

MOV L$测试 [11,33,22,44,55,66,77] <br />
SortList L$测试 L$测试2 0 0<br />
sendmsg 7 按数字升序排序输出结果：&lt;$str(L$测试2)&gt;<br />
;按数字升序排序输出结果：[11,22,33,44,55,66,77] <br /><br />

MOV L$测试 [11,33,22,44,55,66,77,aa] <br />
SortList L$测试 L$测试2 1 0<br />
sendmsg 7 按数字降序排序输出结果：&lt;$str(L$测试2)&gt;<br />
;按数字降序排序输出结果：[error] <br /><br />

MOV L$测试 [aa,cc,dd,bb,ee,ff] <br />
SortList L$测试 L$测试2 0 1<br />
sendmsg 7 按文本升序排序输出结果：&lt;$str(L$测试2)&gt;<br />
;按文本升序排序输出结果：[aa,bb,cc,dd,ee,ff] <br /><br />

MOV L$测试 [aa,cc,dd,bb,ee,ff] <br />
SortList L$测试 L$测试2 1 1<br />
sendmsg 7 按文本降序排序输出结果：&lt;$str(L$测试2)&gt;<br />
;按文本降序排序输出结果：[ff,ee,dd,cc,bb,aa] <br /><br />

;======================================================<br /><br /><br />

<b><p><font face="楷体" color="#0000ff" size="6">################# 以下 2024-06月 重新整理的数组文档 （该文档和上面一样）  ##################</strong></font> </b></p></br></br>

变量操作</br>
赋值：</br>
     直接赋值</br>
     ↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</br>
     MOV L$数组 [字符1,字符2,字符3,字符4]</br>
     MOV L$数组1 [1,2,3,4]</br>
     SENDMSG 6 数组的值为:&lt;$STR(L$数组)&gt;，&lt;$STR(L$数组1)&gt;</br></br>
      
     变量赋值</br>
     ↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</br>
     MOV S$字符串 [字符1,字符2,字符3,字符4]</br>
     MOV L$数组2 &lt;$STR(S$字符串)&gt;</br>
     SENDMSG 6 数组的值为:&lt;$STR(L$数组2)&gt;</br></br>

取值：（中括号内的数字叫：下标，下标从0开始）</br>
     MOV L$数组3 [字符1,字符2,字符3,字符4]</br>
     MOV S$数组第一个值 &lt;$STR(L$数组3[0])&gt; ;输出得到：字符1</br>
     MOV S$数组第二个值 &lt;$STR(L$数组3[1])&gt; ;输出得到：字符2</br>
     MOV N$数组下标3 2</br>
     MOV S$数组第三个值 &lt;$STR(L$数组3[&lt;$STR(N$数组下标3)&gt;])&gt;;输出得到：字符3</br></br>

修改值:</br>
     MOV L$数组4 [字符1,字符2,字符3,字符4]</br>
     MOV L$数组4[0] 张三    ;结果为[张三,字符2,字符3,字符4]</br>
     INC L$数组4[1] 李四    ;结果为[张三,字符2李四,字符3,字符4]</br>
     DEC L$数组4[1] 李四    ;结果为[张三,字符2,字符3,字符4]</br>
     DEC L$数组4 张三       ;结果为[字符2,字符3,字符4]</br>
     MOV N$数组下标1 1</br>
     MOV L$数组4[&lt;$STR(N$数组下标1)&gt;] 王五       ;结果为[字符2,王五,字符4]</br></br>


----------------------------------------------------------------------------------------------------</br></br>

数组命令</br>
功能：获取值位置</br>
格式：GetListVarIndex 数组变量 值 接收变量</br></br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$数组4 [字符1,字符2,字符3,字符4]</br>
GetListVarIndex L$数组4 字符3 N$值所在位置</br>
SENDMSG 6 字符3在数组的第&lt;$STR(N$值所在位置)&gt;个位置。;结果为3</br></br>


----------------------------------------------------------------------------------------------------</br></br>

功能：获取数组值数量</br>
格式：GetListVarCount 数组变量 接收变量</br></br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$数组5 [字符1,字符2,字符3,字符4]</br>
GetListVarCount L$数组5 N$数组元素数量</br>
SENDMSG 6 L$数组内共存在&lt;$STR(N$数组元素数量)&gt;个元素。;结果为4</br></br>


----------------------------------------------------------------------------------------------------</br></br>

功能：检查值是否存在于数组中</br>
格式：CheckVarInList 数组变量 值</br></br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$数组5 [字符1,字符2,字符3,字符4]</br></br>

#IF</br>
CheckVarInList L$数组5 bb</br>
#ACT</br>
SENDMSG 6 [L$数组5]中存在"bb"</br>
#ELSEACT</br>
SENDMSG 7 [L$数组5]中不存在"bb"</br></br>

----------------------------------------------------------------------------------------------------</br></br>

功能：检查数组内所有值是否均为数字</br>
格式：CheckListAllDigit 数组变量</br></br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$测试 [11,22,33,44,55,ff]</br></br>

#IF</br>
CheckListAllDigit L$测试</br>
#ACT</br>
SENDMSG 6 &lt;$STR(L$测试)&gt;中的各子元素全是数字</br>
#ELSEACT</br>
SENDMSG 6 &lt;$STR(L$测试)&gt;中有子元素不是数字</br></br>

----------------------------------------------------------------------------------------------------</br></br>

功能：获取元素中的最大数字值</br>
格式：GetListMaxVar 数组变量 接收变量</br>
功能：获取元素中的最小数字值：</br>
格式：GetListMinVar 元素变量名 接收变量</br>
****************** 以上2个命令必须要求元素中的所有子元素必须是数字，否则得到的结果是error</br></br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$测试 [11,22,33,44,55,66,77,88]</br></br>

#IF</br>
CheckListAllDigit L$测试</br>
#ACT</br>
GetListMaxVar L$测试 S100</br>
GetListMinVar L$测试 S101</br>
SENDMSG 7 输出结果：&lt;$str(L$测试)&gt;中的最大值为&lt;$STR(S100)&gt;，最小值为&lt;$STR(S101)&gt; ;最大值为88,最小值为11</br>
#ELSEACT</br>
SENDMSG 7 &lt;$STR(L$测试)&gt;内有非法数值，取值失败</br></br>


----------------------------------------------------------------------------------------------------</br></br>

功能：数组排序</br>
格式：SortList 待排序数组变量 接收变量 排序方式(空或0:升序-从低到高；1:降序-从高到低) 排序依据(0或空:根据数值排序；1:根据文本排序)</br>
****************** 以上命令要么全是数字,要么全是字符，否则得到的结果是error</br></br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$测试 [66,77,11,33,22,44,55]</br>
SortList L$测试 L$测试2 0 0</br>
SENDMSG 7 按数字升序排序输出结果：&lt;$STR(L$测试2)&gt; ;按数字升序排序输出结果：[11,22,33,44,55,66,77]</br></br>


MOV L$测试 [aa,cc,dd,bb,ee,ff]</br>
SortList L$测试 L$测试2 1 1</br>
SENDMSG 7 按文本降序排序输出结果：&lt;$STR(L$测试2)&gt; ;按文本降序排序输出结果：[ff,ee,dd,cc,bb,aa]</br></br>


----------------------------------------------------------------------------------------------------</br></br>
功能：数组翻转</br>
格式：ReverseList 待翻转数组 接收变量</br></br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$测试 [11,22,33,44,55,66,77,aa]</br>
ReverseList L$测试 L$测试</br>
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;</br>
;输出结果：[aa,77,66,55,44,33,22,11]</br></br>






<b><p><font face="楷体" color="#ff0000" size="6">################### 以下 2024-06月 新增的数组使用操作命令   ################ </strong></font></b></p>

功能：数组追加元素</br>
格式：AddToList 数组变量 值</br>
等同于：Inc 数组变量 值</br></br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$测试 [11,22,33,44,55,66,77,aa]</br>
AddToList L$测试 bb</br>
;***********等同于Inc L$测试 bb</br>
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;</br>
;输出结果：[11,22,33,44,55,66,77,aa,bb]</br>

----------------------------------------------------------------------------------------------------</br></br>

功能：数组插入元素(插入到某个元素之前)</br>
格式：InsertToList 数组变量 值 插入位置(-1为数组最后一位)</br></br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$测试 [11,22,33,44,55,66,77,aa]</br>
InsertToList L$测试 bb 2</br>
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;</br>
;输出结果：[11,22,bb,33,44,55,66,77,aa]</br></br>

----------------------------------------------------------------------------------------------------</br></br>

功能：根据下标替换数组中的元素</br>
格式：ReplaceListByIndex 数组变量 替换值 数组下标</br>
等同于：Mov 数组[下标] 值</br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$测试 [11,ab,AB,AB,55,66,77,aa]</br>
ReplaceListByIndex L$测试 bb 2</br>
;***********等同于 Mov L$测试[2] bb</br>
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;</br>
;输出结果：[11,ab,bb,AB,55,66,77,aa]</br></br>


----------------------------------------------------------------------------------------------------</br>

功能：根据值替换数组中的元素</br>
格式：ReplaceListByContent 数组变量 旧值 新值  区分大小写(0:不区分;1:区分)</br></br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$测试 [11,ab,bb,AB,55,66,77,aa]</br>
ReplaceListByContent  L$测试 ab ac 1</br>
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;</br>
;输出结果：[11,ac,bb,AB,55,66,77,aa]</br></br>


----------------------------------------------------------------------------------------------------</br></br>

功能：根据下标删除数组中的元素</br>
格式：RemoveListByIndex 数组变量 数组下标</br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$测试 [11,33,33,33,55,66,77,aa]</br>
RemoveListByIndex L$测试 5</br>
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;</br>
;输出结果：[11,33,33,33,55,77,aa]</br></br>

例子2：</br>
[@数组例子]</br
MOV L$1 [11,22,33,44]</br>
RemoveListByIndex L$1 -1</br>
sendmsg 7 当前结果：&lt;$str(L$1)&gt;</br>
sendmsg 7 正确结果：[11,22,33]  </br>
;命令均支持大于等于0从第一个往后取；小于0从最后一个往前取</br>
MOV L$1 [11,22,33,44]</br>
RemoveListByIndex L$1 -2</br>
sendmsg 7 当前结果：&lt;$str(L$1)&gt;</br>
sendmsg 7 正确结果：[11,22,44]  </br> </br>
----------------------------------------------------------------------------------------------------</br></br>

功能：根据内容删除数组中的元素</br>
格式：RemoveListByContent 数组变量 元素内容  区分大小写(0:不区分;1:区分)</br>

***********注意：Dec 数组变量  元素内容，也可以删除数组中的元素值，Dec删除元素值时，但是只删第一个匹配到的值</br>

例子：</br>
[@数组例子]</br>
#IF</br>
#ACT</br>
MOV L$测试 [11,33,33,33,55,66,77,aa]</br>
RemoveListByContent L$测试 33</br>
sendmsg 7 输出结果：&lt;$str(L$测试)&gt;</br>
;输出结果：[11,55,66,77,aa]</br></br>




----------------------------------------------------------------------------------------------------</br></br>
功能：数组切片</br>
格式：ExtractList 数组变量 保存变量(可为L、S、T、A等) 起点索引 终点索引 步长(可空，默认1)</br></br>

例子：</br>
[@数组例子]</br>
#IF</br>
#act</br>
MOV L$测试 [0,1,2,3,4,5,6,7,8,9]</br>
ExtractList L$测试 S$保存 0 3</br>
sendmsg 7 当前输出：&lt;$STR(S$保存)&gt;</br>
sendmsg 7 正确输出：[0,1,2,3]</br>

;-------------------------------------------------</br>

MOV L$测试 [0,1,2,3,4,5,6,7,8,9]</br>
ExtractList L$测试 L$保存 0 3 2</br>
sendmsg 7 当前输出：&lt;$STR(L$保存)&gt;</br>
sendmsg 7 正确输出：[0,2]</br>

;-------------------------------------------------</br>

MOV L$测试 [0,1,2,3,4,5,6,7,8,9]</br>
ExtractList L$测试 L$保存 5 8 1</br>
sendmsg 7 当前输出：&lt;$STR(L$保存)&gt;</br>
sendmsg 7 正确输出：[5,6,7,8]</br>


;-------------------------------------------------</br>

MOV L$测试 [0,1,2,3,4,5,6,7,8,9]</br>
ExtractList L$测试 L$保存 -1 -5 1</br>
sendmsg 7 当前输出：&lt;$STR(L$保存)&gt;</br>
sendmsg 7 正确输出：[9,8,7,6,5]</br>




















<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
